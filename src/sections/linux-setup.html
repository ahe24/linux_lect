<section id="linux-setup" class="content-section">
    <h1>Rocky Linux 9 for EDA Server</h1>
    <p>단순한 OS 설치를 넘어, 수천만 원짜리 EDA 툴이 돌아가는 <strong>엔터프라이즈급 서버 구축 노하우</strong>를 공유합니다.</p>

    <h2>1. 파티션 및 파일시스템 전략</h2>
    <p>OS 재설치 시에도 데이터와 툴을 보호하기 위해 물리적/논리적 파티션 분리는 필수입니다.</p>
    <div class="shortcut-grid">
        <div class="shortcut-card">
            <span>/ (Root)</span>
            <span style="font-size: 0.9em; opacity: 0.8;">OS 시스템 영역. 50GB~100GB 권장.</span>
        </div>
        <div class="shortcut-card">
            <span>/tools</span>
            <span style="font-size: 0.9em; opacity: 0.8;">EDA 툴 설치 경로. OS와 완전히 분리 필수.</span>
        </div>
        <div class="shortcut-card">
            <span>/home</span>
            <span style="font-size: 0.9em; opacity: 0.8;">사용자 데이터. 백업 1순위.</span>
        </div>
        <div class="shortcut-card">
            <span>SWAP</span>
            <span style="font-size: 0.9em; opacity: 0.8;">PHY 합성 시 RAM 부족 대비. RAM 용량의 0.5배 이상.</span>
        </div>
    </div>

    <h2>2. 필수 의존성 패키지 (Ghost Libraries)</h2>
    <p>최신 OS(Rocky 9)에 이전 세대 EDA 툴을 설치할 때 발생하는 라이브러리 에러 해결책입니다.</p>
    <pre><code class="language-bash"># 1. EPEL 저장소 활성화
sudo dnf install -y epel-release

# 2. 필수 시스템 라이브러리 & 개발 툴
sudo dnf groupinstall -y "Development Tools"
sudo dnf install -y redhat-lsb-core git wget htop

# 3. EDA 툴 구동을 위한 Legacy 라이브러리 (Crucial!)
# libnsl: FlexLM 라이센스 데몬이 주로 사용
# libX*: Vivado/Questasim GUI 구동용
sudo dnf install -y libnsl libX11 libXext libXft libXtst \
    ncurses-compat-libs \
    libstdc++.i686 glibc.i686</code></pre>

    <div class="note-box">
        <i data-lucide="alert-triangle"></i>
        <div>
            <strong>주의: SELinux 및 방화벽</strong><br>
            FlexLM 라이센스 서버 통신 문제 해결을 위해, 내부망일 경우 SELinux는 <code>Permissive</code>로, 방화벽은 특정 포트(27000~27009)를 개방하거나
            비활성화해야
            할 수 있습니다.
        </div>
    </div>

    <h2>3. EDA 툴 설치 표준 절차</h2>
    <p>EDA 툴은 설치 위치와 권한 설정이 매우 중요합니다. 무턱대고 <code>root</code>로 설치하면 나중에 관리가 어려워집니다.</p>

    <h3>1단계: 설치 디렉토리 준비 (Root 권한 필요)</h3>
    <p>통상적으로 <code>/tools</code> 또는 <code>/opt</code>를 사용합니다. 폴더를 만들고 <strong>소유권을 관리자 계정(또는 본인)으로 변경</strong>해야 합니다.
    </p>
    <pre><code class="language-bash"># 1. 디렉토리 생성 (Root)
sudo mkdir -p /tools/Xilinx

# 2. 소유권 변경 (중요!)
# root가 아닌, 실제 설치를 진행할 사용자($USER)에게 권한을 줍니다.
sudo chown -R $USER:$USER /tools/Xilinx</code></pre>

    <h3>2단계: 설치 프로그램 실행 (GUI)</h3>
    <p>이제 <code>sudo</code> 없이 설치 프로그램을 실행합니다. 그래야 생성되는 파일들이 온전히 내 계정 소유가 됩니다.</p>
    <pre><code class="language-bash"># 설치 프로그램 실행 (sudo 사용 금지!)
./xsetup</code></pre>

    <h3>3단계: 설치 후 환경설정 고려사항</h3>
    <p>설치가 완료되면 벤더가 제공하는 설정 파일(예: <code>settings64.sh</code>) 위치를 파악해둡니다. 이 내용을 바탕으로 다음 섹션의 <strong>나만의 설정
            스크립트</strong>를 만듭니다.</p>

    <div class="note-box">
        <i data-lucide="users"></i>
        <div>
            <strong>Q: 특정 사용자로 설치하면 다른 사람은 못 쓰나요?</strong><br>
            아닙니다! 리눅스 디렉토리는 기본적으로 <strong>755 (drwxr-xr-x)</strong> 권한을 가집니다. 이는 소유자만 수정(Write)할 수 있고, 다른 사용자들은
            <strong>읽기
                및 실행(Read/Execute)</strong>이 가능하다는 뜻입니다. 따라서 설치는 특정 관리자 계정으로 진행하고, 사용은 모든 팀원이 문제없이 할 수 있습니다.
        </div>
    </div>

    <h2>4. 버전별 환경 설정 관리 (Shell Script 활용)</h2>
    <p>Environment Modules와 같은 도구는 설정이 복잡할 수 있습니다. 대신 <strong>버전별 설정 스크립트</strong>를 만들어 필요할 때만 <code>source</code> 하는
        방식이 훨씬 직관적입니다.</p>

    <h3>1. 설정 스크립트 작성 (예: ~/env_vivado_2023.sh)</h3>
    <pre><code class="language-bash">#!/bin/bash
# 2023 버전 경로를 PATH의 맨 앞에 추가(Prepend)
export XILINX_VIVADO=/tools/Xilinx/Vivado/2023.2
export PATH=$XILINX_VIVADO/bin:$PATH

echo "Vivado 2023.2 환경이 로드되었습니다."</code></pre>

    <h3>2. 환경변수 적용 (Source)</h3>
    <p>스크립트를 실행(<code>./Example.sh</code>)하면 자식 쉘에서만 적용되고 사라집니다. 반드시 <strong>source</strong> 명령어로 현재 쉘에 적용해야 합니다.</p>
    <pre><code class="language-bash">source ~/env_vivado_2023.sh</code></pre>

    <div class="note-box">
        <i data-lucide="help-circle"></i>
        <div>
            <strong>자주 묻는 질문: PATH가 계속 쌓이지 않나요?</strong><br>
            맞습니다. 여러 버전을 계속 source 하면 PATH 변수가 길어집니다.
            하지만 위 스크립트는 경로를 <strong>맨 앞($PATH 왼쪽)</strong>에 붙이기 때문에, 시스템은 항상 <strong>가장 최근에 로드한 버전의 명령어</strong>를 우선적으로
            찾습니다.
            따라서 기능상 충돌 없이 정상 작동합니다.
        </div>
    </div>

    <h3>3. 편의성 팁 (Alias 설정)</h3>
    <p>매번 긴 경로를 입력하기 귀찮다면 <code>.bashrc</code>에 단축어를 등록하세요.</p>
    <pre><code class="language-bash"># ~/.bashrc 파일 하단에 추가
alias v2023='source ~/env_vivado_2023.sh'
alias v2024='source ~/env_vivado_2024.sh'</code></pre>

    <h2>5. 다중 사용자 권한 관리 (협업의 핵심)</h2>
    <p>여러 엔지니어가 하나의 프로젝트 폴더를 공유할 때, <strong>"동료가 만든 파일을 수정할 수 없는 문제(Permission Denied)"</strong>가 반드시 발생합니다. 매번
        <code>chmod 777</code>을 하는 것은 보안상 최악입니다.
    </p>
    <p>관리자가 개입하지 않아도 팀원끼리 자유롭게 파일을 수정할 수 있는 <strong>3단계 표준 절차</strong>를 예시와 함께 설명합니다.</p>

    <h3>1. 문제 상황 (Scenario)</h3>
    <p>엔지니어 A와 B가 같은 팀이지만, A가 만든 파일을 B가 수정하려고 하면 <strong>"권한 없음"</strong> 에러가 뜹니다. 이는 리눅스의 기본 설정이 "본인만 수정 가능"하기 때문입니다.
    </p>

    <h3>2. 해결책: SetGID와 Umask 콤보</h3>
    <div class="shortcut-grid">
        <div class="shortcut-card" style="flex-direction: column; align-items: flex-start; white-space: normal;">
            <strong style="margin-bottom: 8px; color: var(--accent-color);">1. SetGID (g+s) 설정</strong>
            <span style="font-size: 0.9em; opacity: 0.8; line-height: 1.5;">"이 폴더 안에 생기는 모든 파일은 <strong>자동으로 팀 그룹
                    소유</strong>가 된다."<br>(작성자의 개인 그룹이 아님)</span>
        </div>
        <div class="shortcut-card" style="flex-direction: column; align-items: flex-start; white-space: normal;">
            <strong style="margin-bottom: 8px; color: var(--accent-color);">2. Umask 002 설정</strong>
            <span style="font-size: 0.9em; opacity: 0.8; line-height: 1.5;">"파일을 만들 때 <strong>같은 팀원에게도 수정(쓰기)
                    권한</strong>을
                준다."<br>(기본값은 읽기만 가능)</span>
        </div>
    </div>

    <h3 style="margin-top: 20px;">3. 따라해보기 (Best Practice)</h3>
    <pre><code class="language-bash"># [관리자] 1. 프로젝트 폴더 생성 및 그룹 지정
sudo mkdir /data/project_X
sudo chown root:eda_users /data/project_X

# [관리자] 2. 핵심! SetGID 비트 설정
# g+s를 하면 그룹 권한 자리에 's'가 생깁니다 (drwxr-sr-x)
sudo chmod g+s /data/project_X

# [사용자] 3. Umask 설정을 .bashrc에 추가
# "내가 만드는 파일은 팀원도 수정할 수 있게(rw-rw-r--) 해주세요"
echo "umask 002" >> ~/.bashrc</code></pre>

    <div class="note-box">
        <i data-lucide="check-circle"></i>
        <div>
            <strong>결과:</strong><br>
            이제 엔지니어 A가 파일을 생성해도, 소유 그룹은 자동으로 <code>eda_users</code>가 되고 권한은 <code>rw-</code>(쓰기 가능)로 설정됩니다. 엔지니어 B는 자유롭게
            수정할 수 있습니다.
        </div>
    </div>
</section>